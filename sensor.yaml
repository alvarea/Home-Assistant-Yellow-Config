#
# SENSORES FECHA Y HORA
#
  - platform: time_date
    display_options:
      - 'date'
      - 'date_time'
      - 'time'

  # No disponible en YAML dede 2023.06 con un warning.
  #- platform: command_line
  #  name: Temperatura CPU
  #  command: "cat /sys/class/thermal/thermal_zone0/temp"
  #  # If errors occur, remove degree symbol below
  #  unit_of_measurement: "°C"
  #  value_template: '{{ value | multiply(0.001) | round(1) }}'

  #- platform: command_line
  #  command: python3 -c "import requests; print(requests.get('https://pypi.python.org/pypi/homeassistant/json').json()['info']['version'])"
  #  name: Versión HA (web)

  #- platform: systemmonitor
  #  resources:
  #    - type: load_15m
  #    - type: processor_use
  #    - type: memory_use_percent
  #    - type: memory_use
  #    - type: memory_free
  #    - type: swap_use_percent
  #    - type: last_boot
  #    - type: disk_use_percent
  #      arg: /
  #    - type: disk_use
  #      arg: /
  #    - type: disk_free
  #      arg: /
  #    - type: processor_temperature

  - platform: sql
    db_url: !secret mariadb_url
    scan_interval: 3600
    queries:
      - name: 'MariaDB size'
        query: 'SELECT table_schema "database", Round(Sum(data_length + index_length) / 1048576, 1) "value" FROM information_schema.tables WHERE table_schema="homeassistant_prod" GROUP BY table_schema;'
        column: 'value'
        unit_of_measurement: MB

  - platform: statistics
    name: aemet_rain_24h_mean
    entity_id: sensor.aemet_rain
    state_characteristic: mean
    sampling_size: 20
    max_age:
      hours: 24

  - platform: statistics
    name: aemet_rain_24h_max
    entity_id: sensor.aemet_rain
    state_characteristic: value_max
    sampling_size: 20
    max_age:
      hours: 24

  - platform: statistics
    name: aemet_rain_24h_min
    entity_id: sensor.aemet_rain
    state_characteristic: value_min
    sampling_size: 20
    max_age:
      hours: 24

  - platform: statistics
    name: aemet_rain_24h_total
    entity_id: sensor.aemet_rain
    state_characteristic: total
    sampling_size: 20
    max_age:
      hours: 24

  - platform: statistics
    name: aemet_rain_24h_count
    entity_id: sensor.aemet_rain
    state_characteristic: count
    sampling_size: 20
    max_age:
      hours: 24

  - platform: statistics
    name: aemet_rain_24h_change
    entity_id: sensor.aemet_rain
    state_characteristic: change
    sampling_size: 20
    max_age:
      hours: 24

  #- platform: statistics
  #  name: aemet_rain_24h_datetime_oldest
  #  entity_id: sensor.aemet_rain
  #  state_characteristic: datetime_oldest
  #  max_age:
  #    hours: 24

  # Hora Mínima Inicio Riego Cesped Por Tramos
  - platform: min_max
    name: min_riego_start_time_t1
    type: min
    entity_ids:
      - sensor.riego_cesped_ch1_start_time_t1
      - sensor.riego_cesped_ch2_start_time_t1
      - sensor.riego_cesped_ch3_start_time_t1
      - sensor.riego_cesped_ch4_start_time_t1

  - platform: min_max
    name: min_riego_start_time_t2
    type: min
    entity_ids:
      - sensor.riego_cesped_ch1_start_time_t2
      - sensor.riego_cesped_ch2_start_time_t2
      - sensor.riego_cesped_ch3_start_time_t2
      - sensor.riego_cesped_ch4_start_time_t2

  # Hora Máxima Final Riego Cesped Por Tramos
  - platform: min_max
    name: max_riego_end_time_t1
    type: max
    entity_ids:
      - sensor.riego_cesped_ch1_end_time_t1
      - sensor.riego_cesped_ch2_end_time_t1
      - sensor.riego_cesped_ch3_end_time_t1
      - sensor.riego_cesped_ch4_end_time_t1

  - platform: min_max
    name: max_riego_end_time_t2
    type: max
    entity_ids:
      - sensor.riego_cesped_ch1_end_time_t2
      - sensor.riego_cesped_ch2_end_time_t2
      - sensor.riego_cesped_ch3_end_time_t2
      - sensor.riego_cesped_ch4_end_time_t2